(function($){"use strict";var BootstrapGallery=function(element,options){this.$gallery=$(element);this.options=$.extend({},BootstrapGallery.defaults);if(options.hasOwnProperty("iconset")&&options.iconset=="fontawesome"){$.extend(this.options,BootstrapGallery.fontawesomeOptions)}$.extend(this.options,options);this.count=this.$gallery.children().length;this.index=0;if(BootstrapGallery.elements===undefined){var elements={$modal:$("<div/>").attr(this.options.modalAttrs),$container:$("<div/>").attr(this.options.containerAttrs),$wrapper:$("<div/>").attr(this.options.wrapperAttrs),$closeBtn:$("<button/>").attr(this.options.closeBtnAttrs),$btnPrev:$("<button/>").attr(this.options.btnPrevAttrs),$btnNext:$("<button/>").attr(this.options.btnNextAttrs),$img:$("<img/>").attr(this.options.imgAttrs)};elements["wrapper"]=elements.$wrapper[0];elements.$wrapper.append(elements.$closeBtn,elements.$btnPrev,elements.$btnNext,elements.$img);elements.$container.append(elements.$wrapper);elements.$modal.append(elements.$container);$("body").append(elements.$modal);this.elements=elements;BootstrapGallery.elements=elements}else{this.elements=BootstrapGallery.elements}this.registerThumbs()};BootstrapGallery.defaults={modalAttrs:{id:"gallery-modal","class":"modal fade",tabindex:"-1",role:"dialog","aria-hidden":"true"},containerAttrs:{"class":"img-container"},wrapperAttrs:{"class":"img-wrapper"},imgAttrs:{"class":"img-responsive",src:"#"},closeBtnAttrs:{"class":"btn-close glyphicon glyphicon-remove","aria-hidden":"true"},btnPrevAttrs:{"class":"btn-prev glyphicon glyphicon-chevron-left"},btnNextAttrs:{"class":"btn-next glyphicon glyphicon-chevron-right"}};BootstrapGallery.fontawesomeOptions={closeBtnAttrs:{"class":"btn-close fa fa-times","aria-hidden":"true"},btnPrevAttrs:{"class":"btn-prev fa fa-angle-left"},btnNextAttrs:{"class":"btn-next fa fa-angle-right"}};BootstrapGallery.prototype.registerThumbs=function(){var elements=this.elements;var self=this;this.$gallery.children().each(function(){$(this).off("click").on("click",function(e){e.preventDefault();elements.$img.attr("src",$(this).attr("href"));self.index=$(this).index();elements.$modal.modal();self.registerBtns();self.registerKeys();self.registerWindowResize();setTimeout(function(){elements.$modal.focus()},200)})})};BootstrapGallery.prototype.registerBtns=function(){var elements=this.elements;var self=this;function updateImg(index){elements.$img.attr("src",self.$gallery.children(":eq("+index+")").attr("href"))}elements.$btnNext.off("click").on("click",function(e){e.preventDefault();self.index++;if(self.index>=self.count){self.index=0}updateImg(self.index)});elements.$btnPrev.off("click").on("click",function(e){e.preventDefault();self.index--;if(self.index<0){self.index=self.count-1}updateImg(self.index)});elements.$container.off("click").on("click",function(e){e.preventDefault();elements.$modal.modal("hide")});elements.$closeBtn.off("click").on("click",function(e){e.preventDefault();elements.$modal.modal("hide")});elements.$wrapper.off("click").on("click",function(e){e.preventDefault();return false})};BootstrapGallery.prototype.registerKeys=function(){var elements=this.elements;elements.$modal.off("keydown").on("keydown",function(e){if(e.keyCode==37){elements.$btnPrev.click()}if(e.keyCode==39){elements.$btnNext.click()}if(e.keyCode==27){elements.$modal.modal("hide")}})};BootstrapGallery.prototype.registerWindowResize=function(){var wrapper=this.elements.wrapper;$(window).resize(function(){wrapper.style.display="none";wrapper.offsetHeight;wrapper.style.display="inline-block"})};var old=$.fn.bootstrapGallery;$.fn.bootstrapGallery=function(options){return this.each(function(){var data=$(this).data("bs.Gallery");if(!data){$(this).data("bs.Gallery",data=new BootstrapGallery($(this),options))}})};$.fn.bootstrapGallery.Constructor=BootstrapGallery;$.fn.bootstrapGallery.noConflict=function(){$.fn.bootstrapGallery=old;return this}})(jQuery);